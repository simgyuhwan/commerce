# 요구사항 검증 체크리스트

## 1. 비즈니스 로직 (Business Logic)

### 예외 시나리오
- [ ] Happy Path만 있고 실패 케이스 없음?
- [ ] "결제 실패하면?" 시나리오
- [ ] "동시에 100명이 주문하면?" 시나리오
- [ ] "외부 API 타임아웃되면?" 시나리오

### 상태 전이
- [ ] 모든 상태 정의됨?
- [ ] 상태 전이 규칙 명확?
- [ ] 역방향 전이 (취소, 반품) 가능?
- [ ] 상태 변경 권한 정의?

### 동시성
- [ ] Race Condition 고려?
- [ ] Lock 전략 (Optimistic/Pessimistic)?
- [ ] 재고 차감 시점?
- [ ] 중복 방지 메커니즘?

### 데이터 정합성
- [ ] 트랜잭션 경계?
- [ ] 실패 시 롤백/보상?
- [ ] 분산 트랜잭션 필요성?

### 시간 제약
- [ ] 타임아웃 설정?
- [ ] 만료 시간 (쿠폰, 장바구니)?
- [ ] 배치 실행 주기?

## 2. 데이터 모델 (Data Model)

### 식별자
- [ ] 생성 규칙 (UUID? Sequential?)?
- [ ] 형식 명시 (ORD-20250214-0001)?
- [ ] 중복 방지?

### 필드 정의
- [ ] 필수/선택 구분?
- [ ] NULL 허용 여부?
- [ ] 기본값?
- [ ] 검증 규칙?

### 데이터 타입
- [ ] 금액: DECIMAL (Float 금지)
- [ ] 날짜: DATETIME or TIMESTAMP
- [ ] 전화번호: VARCHAR (숫자 타입 금지)
- [ ] Boolean: TINYINT(1) or BOOLEAN

### 크기 제약
- [ ] 문자열 최대 길이?
- [ ] 파일 최대 크기?
- [ ] 배열 최대 개수?

### 관계
- [ ] 1:N, N:M 명시?
- [ ] Cascade 옵션?
- [ ] 고아 객체 처리?

### 삭제 정책
- [ ] 물리적 삭제? 논리적 삭제?
- [ ] 변경 이력 보관?

## 3. API 명세 (API Specification)

### 엔드포인트
- [ ] RESTful 원칙?
- [ ] 명명 규칙 일관성?
- [ ] 버전 관리 (v1, v2)?

### 입력 검증
- [ ] Required/Optional?
- [ ] 타입, 형식, 범위?
- [ ] 정규식 패턴?

### 응답 구조
- [ ] 성공/실패 형식 통일?
- [ ] 에러 코드 체계?
- [ ] 페이징 방식?

### HTTP Status
- [ ] 200 vs 201 vs 204?
- [ ] 400 vs 422?
- [ ] 401 vs 403?

## 4. 보안 (Security)

### 인증/인가
- [ ] 인증 방식 (JWT, Session, OAuth)?
- [ ] 권한 레벨 정의?
- [ ] 토큰 만료 정책?

### 개인정보
- [ ] PII 식별?
- [ ] 암호화 대상?
- [ ] 로그 마스킹?
- [ ] GDPR 준수?

### 입력 검증
- [ ] XSS 방어?
- [ ] SQL Injection 방어?
- [ ] 파일 업로드 검증?

### 민감정보
- [ ] 결제 정보 비저장?
- [ ] 패스워드 해싱 (bcrypt)?
- [ ] API Key 관리?

## 5. 성능 (Performance)

### 응답 시간
- [ ] 평균/최대 목표?
- [ ] P95, P99 목표?
- [ ] 타임아웃?

### 처리량
- [ ] TPS/QPS 목표?
- [ ] 동시 접속자?
- [ ] 피크 타임 대비?

### 캐싱
- [ ] 무엇을 캐싱?
- [ ] TTL?
- [ ] 무효화 전략?

### 대용량
- [ ] 배치 처리 방식?
- [ ] 페이징 전략?
- [ ] 비동기 처리?

## 6. 확장성 (Scalability)

### 수평 확장
- [ ] Stateless 설계?
- [ ] 세션 공유?
- [ ] 파일 저장소 (S3)?

### DB 확장
- [ ] Read Replica?
- [ ] Sharding 전략?
- [ ] 파티셔닝?

### 마이크로서비스
- [ ] Bounded Context 분리?
- [ ] 서비스 간 통신?
- [ ] 분산 트랜잭션?

## 7. 운영 (Operations)

### 모니터링
- [ ] 핵심 메트릭?
- [ ] 알람 임계값?
- [ ] 대시보드?

### 로깅
- [ ] 로그 레벨?
- [ ] 구조화된 로깅?
- [ ] 보관 기간?

### 장애 대응
- [ ] Health Check?
- [ ] Circuit Breaker?
- [ ] Retry 정책?

### 배포
- [ ] 무중단 배포?
- [ ] 롤백 계획?
- [ ] DB 마이그레이션?

### 백업/복구
- [ ] 백업 주기?
- [ ] RTO/RPO 목표?
- [ ] 재해 복구?

## 질문 템플릿

### 비즈니스
1. 쿠폰 중복 사용 가능?
2. 포인트 소멸 정책?
3. 회원 등급 제도?
4. 대량 구매 할인?
5. 반품 배송비?

### 기술
6. DB 단일? 복제본?
7. 이미지 리사이징?
8. 검색 엔진 동기화?
9. Redis 구성?
10. 메시지 큐 전략?

### 보안
11. 2FA 지원?
12. 이상 거래 탐지?
13. IP 차단?
14. Rate Limiting?
15. 권한 계층?

### 운영
16. 배포 전략?
17. Feature Toggle?
18. A/B 테스트?
19. 로그 수집 도구?
20. APM 도구?

## 자동 수정 예시

### Critical: SQL Injection
```markdown
**문제**: 사용자 입력 직접 쿼리 삽입
**수정**:
```java
// Before
String sql = "SELECT * FROM users WHERE name = '" + name + "'";

// After  
String sql = "SELECT * FROM users WHERE name = ?";
jdbcTemplate.query(sql, name);
```
```

### Critical: 암호화 누락
```markdown
**문제**: 개인정보 처리 방침 없음
**추가**:
## 개인정보 보호
- 사업자번호: AES-256 암호화
- 계좌번호: AES-256 암호화
- 비밀번호: bcrypt 해싱
- 탈퇴 시: 즉시 삭제 (법적 보관 제외)
```